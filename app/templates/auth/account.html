{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <!-- Account Settings -->
        <div class="card card-form mb-4">
            <div class="card-header">
                <h4 class="mb-0">Account Settings</h4>
            </div>
            <div class="card-body">
                <form method="post" class="mb-4">
                    {{ form.hidden_tag() }}
                    <div class="mb-3">
                        {{ form.username.label(class="form-label") }}
                        {{ form.username(class="form-control") }}
                        {% for error in form.username.errors %}
                        <span class="text-danger">{{ error }}</span>
                        {% endfor %}
                    </div>
                    <div class="mb-3">
                        {{ form.email.label(class="form-label") }}
                        {{ form.email(class="form-control") }}
                        {% for error in form.email.errors %}
                        <span class="text-danger">{{ error }}</span>
                        {% endfor %}
                    </div>
                    <div class="mb-3">
                        {{ form.new_password.label(class="form-label") }}
                        {{ form.new_password(class="form-control") }}
                        <div class="form-text">Leave blank to keep current password</div>
                        {% for error in form.new_password.errors %}
                        <span class="text-danger">{{ error }}</span>
                        {% endfor %}
                    </div>
                    <div class="mb-3">
                        {{ form.confirm_password.label(class="form-label") }}
                        {{ form.confirm_password(class="form-control") }}
                        {% for error in form.confirm_password.errors %}
                        <span class="text-danger">{{ error }}</span>
                        {% endfor %}
                    </div>
                    <div class="mb-3">
                        {{ form.current_password.label(class="form-label") }}
                        {{ form.current_password(class="form-control") }}
                        <div class="form-text">Required to confirm changes</div>
                        {% for error in form.current_password.errors %}
                        <span class="text-danger">{{ error }}</span>
                        {% endfor %}
                    </div>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </form>

                <hr class="my-4">

                <!-- Delete Account Section -->
                <div class="text-danger">
                    <h5>Delete Account</h5>
                    <p class="mb-3">
                        This action cannot be undone. Your account will be permanently deleted, but your incident reports
                        will be anonymized and retained for statistical purposes.
                    </p>
                    <form method="post" action="{{ url_for('auth.delete_account') }}" 
                          onsubmit="return confirm('Are you sure you want to delete your account? This action cannot be undone.');">
                        {{ form.csrf_token }}
                        <button type="submit" class="btn btn-outline-danger">
                            <i class="bi bi-trash me-2"></i>Delete Account
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- About Section -->
        <div class="card mb-4">
            <div class="card-header">
                <h4 class="mb-0">About</h4>
            </div>
            <div class="card-body">
                <p>Triton Pathways is a dedicated system for tracking and managing safety incidents 
                related to micromobility devices (e-scooters, bikes, etc.) on the UCSD campus. This platform helps identify 
                safety trends and areas needing attention to improve campus mobility safety.</p>
                
                <h5 class="mt-4">Key Features</h5>
                <ul>
                    <li>Interactive incident reporting with map location selection</li>
                    <li>Real-time incident visualization through markers and heatmaps</li>
                    <li>Comprehensive incident tracking with severity levels</li>
                    <li>Photo upload capability for better documentation</li>
                    <li>Dark mode support for comfortable viewing</li>
                </ul>
            </div>
        </div>

        <!-- Attributions -->
        <div class="card">
            <div class="card-header">
                <h4 class="mb-0">Attributions</h4>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h5>Technologies</h5>
                        <ul class="list-unstyled">
                            <li>Built with <a href="https://flask.palletsprojects.com/" target="_blank">Flask</a></li>
                            <li>Styled with <a href="https://getbootstrap.com/" target="_blank">Bootstrap 5</a></li>
                            <li>Icons by <a href="https://icons.getbootstrap.com/" target="_blank">Bootstrap Icons</a></li>
                            <li>Maps powered by <a href="https://leafletjs.com/" target="_blank">Leaflet.js</a></li>
                            <li>Font by <a href="https://rsms.me/inter/" target="_blank">Inter</a></li>
                            <li>Animations by <a href="https://michalsnik.github.io/aos/" target="_blank">AOS</a></li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h5>Data Sources</h5>
                        <ul class="list-unstyled">
                            <li>Map data © <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors</li>
                            <li>Heatmap visualization by <a href="https://github.com/Leaflet/Leaflet.heat" target="_blank">Leaflet.heat</a></li>
                        </ul>
                    </div>
                </div>
                
                <h5 class="mt-4">License Information</h5>
                <p>Triton Pathways is licensed under the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License (CC BY-NC-SA 4.0)</a>.</p>
                
                <div class="mt-2">
                    <p><strong>Under this license, you are free to:</strong></p>
                    <ul>
                        <li><strong>Share</strong> — copy and redistribute the material in any medium or format</li>
                        <li><strong>Adapt</strong> — remix, transform, and build upon the material</li>
                    </ul>
                    
                    <p><strong>Under the following terms:</strong></p>
                    <ul>
                        <li><strong>Attribution</strong> — You must give appropriate credit, provide a link to the license, and indicate if changes were made. You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.</li>
                        <li><strong>NonCommercial</strong> — You may not use the material for commercial purposes.</li>
                        <li><strong>ShareAlike</strong> — If you remix, transform, or build upon the material, you must distribute your contributions under the same license as the original.</li>
                    </ul>
                    
                    <p>Copyright © 2025 UCSD Triton Pathways</p>
                </div>
                
                <h5 class="mt-4">Third-Party Licenses</h5>
                <ul>
                    <li><strong>Flask</strong>: BSD 3-Clause License</li>
                    <li><strong>Bootstrap</strong>: MIT License</li>
                    <li><strong>Bootstrap Icons</strong>: MIT License</li>
                    <li><strong>Leaflet.js</strong>: BSD 2-Clause License</li>
                    <li><strong>Inter Font</strong>: SIL Open Font License 1.1</li>
                    <li><strong>AOS</strong>: MIT License</li>
                    <li><strong>Leaflet.heat</strong>: BSD 2-Clause License</li>
                </ul>
                
                <p class="mt-3">For full license details, please visit our <a href="https://github.com/reslami/UCSD-Triton-Pathways" target="_blank">GitHub repository</a> or contact the project administrators.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %} 